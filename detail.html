<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Detail Warga â€” Portal Data Warga</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="detail.css">
</head>
<body>
  <header class="admin-header d-flex justify-content-between align-items-center px-4 py-3">
    <div class="d-flex align-items-center gap-2">
      <img src="https://cdn-icons-png.flaticon.com/512/942/942751.png" alt="Logo" class="logo-icon" style="width:36px;">
      <h5 class="mb-0">Detail Data Warga</h5>
    </div>
    <div class="d-flex align-items-center gap-3">
      <a href="dashboard_admin.html" class="btn btn-outline-secondary btn-sm">Kembali</a>
    </div>
  </header>

  <main class="container my-4">
    <div id="notFound" class="alert alert-warning d-none">Data tidak ditemukan.</div>

    <div id="detailCard" class="card d-none">
      <div class="card-body">
        <div class="row">
          <div class="col-md-3 text-center">
            <img id="detailFoto" src="" alt="Foto" class="img-fluid rounded mb-3" style="width:180px;height:240px;object-fit:cover;">
          </div>
          <div class="col-md-9">
            <h4 id="detailNama"></h4>
            <table class="table table-borderless">
              <tbody id="detailBody"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    function qs(name) {
      const params = new URLSearchParams(window.location.search);
      return params.get(name);
    }

    const id = qs('id');
    const data = JSON.parse(localStorage.getItem('wargaData') || '[]');

    if (id === null || !data[id]) {
      document.getElementById('notFound').classList.remove('d-none');
    } else {
      const person = data[id];
      document.getElementById('detailCard').classList.remove('d-none');
      document.getElementById('detailFoto').src = person.foto || 'https://i.imgur.com/UQ0Q3mU.png';
      document.getElementById('detailNama').textContent = person.nama || '-';

      const mapping = [
        ['NIK', person.nik || '-'],
        ['Tempat Lahir', person.birthPlace || '-'],
        ['Tanggal Lahir', person.birthDate ? new Date(person.birthDate).toLocaleDateString('id-ID') : '-'],
        ['Jenis Kelamin', person.gender || '-'],
        ['Agama', person.religion || '-'],
        ['Pendidikan', person.education || '-'],
        ['Pekerjaan', person.occupation || '-'],
        ['Nama Instansi', person.institution || '-'],
        ['Alamat', person.address || '-'],
        ['Email', person.email || '-'],
        ['Telepon', person.phone || '-'],
        ['Tanggal Input', person.createdAt ? new Date(person.createdAt).toLocaleString('id-ID') : '-']
      ];

      const tbody = document.getElementById('detailBody');
      mapping.forEach(([k, v]) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<th style="width:200px">${k}</th><td>${v}</td>`;
        tbody.appendChild(tr);
      });
    }
  </script>
</body>
</html>